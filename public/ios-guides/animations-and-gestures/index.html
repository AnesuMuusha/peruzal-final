<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>Animations and Gestures - Xamarin iOS Guides</title>
    <meta name="generator" content="Hugo 0.17" />

    
    <meta name="description" content="Xamrin iOS guides for the Peruzal Cross Platform Mobile App Development course">
    
    <link rel="canonical" href="http://guides.peruzal.com/ios-guides/animations-and-gestures/">
    
    <meta name="author" content="Peruzal">
    

    <meta property="og:url" content="http://guides.peruzal.com/ios-guides/animations-and-gestures/">
    <meta property="og:title" content="Xamarin iOS Guides">
    <meta property="og:image" content="http://guides.peruzal.com/ios-guides/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="Xamarin iOS Guides">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="http://guides.peruzal.com/ios-guides/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="http://guides.peruzal.com/ios-guides/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('http://guides.peruzal.com/ios-guides/fonts/icon.eot?52m981');
        src: url('http://guides.peruzal.com/ios-guides/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
             url('http://guides.peruzal.com/ios-guides/fonts/icon.woff?52m981')
               format('woff'),
             url('http://guides.peruzal.com/ios-guides/fonts/icon.ttf?52m981')
               format('truetype'),
             url('http://guides.peruzal.com/ios-guides/fonts/icon.svg?52m981#icon')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="http://guides.peruzal.com/ios-guides/stylesheets/application.css">
    <link rel="stylesheet" href="http://guides.peruzal.com/ios-guides/stylesheets/temporary.css">
    <link rel="stylesheet" href="http://guides.peruzal.com/ios-guides/stylesheets/palettes.css">
    <link rel="stylesheet" href="http://guides.peruzal.com/ios-guides/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="http://guides.peruzal.com/ios-guides/javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-red palette-accent-teal">




<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Animations and Gestures
      </div>
    </div>

    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/peruzal" title="@peruzal on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="http://guides.peruzal.com/ios-guides/" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="http://guides.peruzal.com/ios-guides/images/logo.png">
        </div>
      
      <div class="name">
        <strong>Xamarin iOS Guides <span class="version">1.0.0</span></strong>
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a  title="iOS with Swift and Objective-C" href="http://guides.peruzal.com/ios-guides/">
	
	iOS with Swift and Objective-C
</a>



  
</li>



<li>
  
    



<a  title="Getting Started" href="http://guides.peruzal.com/ios-guides/getting-started/">
	
	Getting Started
</a>



  
</li>



<li>
  
    



<a  title="Setting up a Project" href="http://guides.peruzal.com/ios-guides/setup/">
	
	Setting up a Project
</a>



  
</li>



<li>
  
    



<a  title="Swift Fundamentals" href="http://guides.peruzal.com/ios-guides/swift/">
	
	Swift Fundamentals
</a>



  
</li>



<li>
  
    



<a  title="Swift Objective-C Interoperability" href="http://guides.peruzal.com/ios-guides/swift-objective-c-interoperability/">
	
	Swift Objective-C Interoperability
</a>



  
</li>



<li>
  
    



<a  title="Objective-C Fundamentals" href="http://guides.peruzal.com/ios-guides/objective-c/">
	
	Objective-C Fundamentals
</a>



  
</li>



<li>
  
    



<a  title="Common Views" href="http://guides.peruzal.com/ios-guides/common-views/">
	
	Common Views
</a>



  
</li>



<li>
  
    



<a  title="Form Input" href="http://guides.peruzal.com/ios-guides/form-input/">
	
	Form Input
</a>



  
</li>



<li>
  
    



<a  title="Model View Controller(MVC)" href="http://guides.peruzal.com/ios-guides/mvc/">
	
	Model View Controller(MVC)
</a>



  
</li>



<li>
  
    



<a  title="Auto Layout and Size Classes" href="http://guides.peruzal.com/ios-guides/auto-layout-and-size-classes/">
	
	Auto Layout and Size Classes
</a>



  
</li>



<li>
  
    



<a  title="Table View" href="http://guides.peruzal.com/ios-guides/tableview/">
	
	Table View
</a>



  
</li>



<li>
  
    



<a  title="Collection View" href="http://guides.peruzal.com/ios-guides/collection-view/">
	
	Collection View
</a>



  
</li>



<li>
  
    



<a  title="Tab Bar" href="http://guides.peruzal.com/ios-guides/tabbar-controller/">
	
	Tab Bar
</a>



  
</li>



<li>
  
    



<a  title="Scroll View" href="http://guides.peruzal.com/ios-guides/scrollview/">
	
	Scroll View
</a>



  
</li>



<li>
  
    



<a  title="Search Bar" href="http://guides.peruzal.com/ios-guides/searchbar/">
	
	Search Bar
</a>



  
</li>



<li>
  
    



<a  title="Navigation Patterns" href="http://guides.peruzal.com/ios-guides/navigation/">
	
	Navigation Patterns
</a>



  
</li>



<li>
  
    



<a  title="Passing Data between View Controllers" href="http://guides.peruzal.com/ios-guides/passing-data/">
	
	Passing Data between View Controllers
</a>



  
</li>



<li>
  
    



<a  title="Navigation Controller" href="http://guides.peruzal.com/ios-guides/navigation-controller/">
	
	Navigation Controller
</a>



  
</li>



<li>
  
    



<a  title="Location" href="http://guides.peruzal.com/ios-guides/location/">
	
	Location
</a>



  
</li>



<li>
  
    



<a  title="Maps and Location" href="http://guides.peruzal.com/ios-guides/maps-and-location/">
	
	Maps and Location
</a>



  
</li>



<li>
  
    



<a  title="iOS Frameworks and Device Sensors" href="http://guides.peruzal.com/ios-guides/ios-frameworks-and-device-sensors/">
	
	iOS Frameworks and Device Sensors
</a>



  
</li>



<li>
  
    



<a  title="Networking and Threading" href="http://guides.peruzal.com/ios-guides/networking-and-threading/">
	
	Networking and Threading
</a>



  
</li>



<li>
  
    



<a class="current" title="Animations and Gestures" href="http://guides.peruzal.com/ios-guides/animations-and-gestures/">
	
	Animations and Gestures
</a>


<ul id="scrollspy">
</ul>


  
</li>



<li>
  
    



<a  title="Persistence" href="http://guides.peruzal.com/ios-guides/persistence/">
	
	Persistence
</a>



  
</li>


        </ul>
        

        
        <hr>
        <span class="section">The author</span>
        
        <ul>
          

          
          <li>
            <a href="https://github.com/peruzal" target="_blank" title="@peruzal on GitHub">
              @peruzal on GitHub
            </a>
          </li>
          

          
          <li>
            <a href="mailto:info@peruzal.com" title="Email of info@peruzal.com">
              Contact via email
            </a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>Animations and Gestures </h1>

			

<h2 id="introduction">Introduction</h2>

<p>iOS was built from the ground up to support animation. It is absolutely required to maintain the illusion of a touch-based interface.</p>

<p>It&rsquo;s best to start out using Springs-and-Struts layout. Later in the guide we&rsquo;ll cover Auto-Layout, with requires a little more abstract thinking.</p>

<h2 id="simple-animation-with-uikit">Simple Animation with UIKit</h2>

<p>Most of the time, you will perform animation by working directly with UIKit. Say you have a view, <code>myView</code>, and you want to animate its movement from its current position to a new position, the <code>myNewFrame</code> rect. You simply call:</p>

<pre><code>UIView.animateWithDuration(0.35) {
    self.myView.frame = myNewFrame
}
</code></pre>

<p>Behind the scenes, it is making calls to a lower layer in the stack, <strong>Core Animation.</strong> You work with Core Animation directly when you need to create complex animation, or do something performance intensive.</p>

<p>There are more complex animation methods available to avoid going lower. If you need to call code with the animation completes:</p>

<pre><code>UIView.animateWithDuration(0.35, animations: {
    self.myView.frame = myNewFrame
}, completion: { (finished) in
    NSLog(&quot;Animation completed.&quot;)
})
</code></pre>

<p>If you want to pass even more options, such as the animation curve:</p>

<pre><code>UIView.animateWithDuration(0.35, delay: 0.5, options: .CurveEaseInOut, animations: {
  self.myView.frame = myNewFrame
}, completion: { (finished) in
  NSLog(&quot;Animation completed.&quot;)
})
</code></pre>

<p>This style of animation, where you just specify new attributes and let Core Animation figure it out for you is <strong>implicit</strong> animation. To create complex animation, you need to delve directly into layers.</p>

<h2 id="understanding-layers">Understanding Layers</h2>

<p>Core Animation is a misnomer for the framework. Its original name was <em>LayerKit.</em> It is a framework for displaying a hierarchy of layers on screen.</p>

<p>A layer is a container for a bitmap image. Layers are rendered on screen via the GPU, which makes it super fast to render most animation.</p>

<p>UIKit&rsquo;s view hierarchies are backed by a near-identical layer hierarchy. In fact, every UIView has a <code>.layer</code> property for accessing its corresponding layer. Behind the scenes, UIView populates layer&rsquo;s contents for you. So while a UILabel displays text, it is ultimately flattened to a bitmap and handed over to its associated layer.</p>

<p>Views are are so tightly associated to layers that many attributes are shared; for instance, if you change the layer&rsquo;s <code>opacity</code> value, then the view&rsquo;s <code>alpha</code> will also change.</p>

<p>The big difference between a view and a layer is a view can receive events. If you don&rsquo;t need the overhead, you can managed your layer&rsquo;s sublayers yourself. This might improve performance if you&rsquo;re dealing with hundreds of layers on screen at once, such as if you&rsquo;re building a particle system. Most of the time, this is overkill.</p>

<h3 id="implicit-animation-in-layers">Implicit Animation in Layers</h3>

<p>When layers exist by themselves, not attached to a view, most property changes are animated by default. However, layers attached to views have this default animation turned off. When you call <code>UIView</code>&rsquo;s <code>animatedWithDuration</code>, implicit animation is turned on again.</p>

<h3 id="transactions">Transactions</h3>

<p>All animation changes are bundled together in a transaction. This is usually invisible, as there&rsquo;s usually one created for you with every pass through the run loop. This lets you make a bunch of changes that are batched together at once in the end.</p>

<p>Imagine you make two changes to your layer:</p>

<pre><code>myLayer.opacity = 0.0
myLayer.opacity = 1.0
</code></pre>

<p>The first change has no effect. There is no momentary &ldquo;blip&rdquo; of 0.0 opacity. Instead, after all your code is run, Core Animation looks at all the final values to create the animation.</p>

<h2 id="explicit-animation">Explicit Animation</h2>

<p>An explicit animation allows you to construct more complex animations, such as animating a view animate along a bezier path.</p>

<p>To construct a basic animation:</p>

<pre><code>myView.layer.position = endPosition
let animation = CABasicAnimation(keyPath: &quot;position&quot;)
animation.fromValue = NSValue(CGPoint:startPosition)
animation.toValue = NSValue(CGPoint:endPosition)
animation.duration = 1.0
myView.layer.addAnimation(animation, forKey: &quot;MyAnimationKey&quot;)
</code></pre>

<p>The <code>position</code> key is the name of the property you want animated. The key in the <code>addAnimation</code> method is a made-up key you will use to identify the animation in flight.</p>

<p>One caveat from the above example is that we made sure to update the underlying <code>layer.position</code> value in addition to applying the animation. Otherwise, the animation would have completed and then the layer would have immediately jumped back to initial position.</p>

<h2 id="references">References</h2>

<ul>
<li><a href="https://developer.apple.com/library/ios/documentation/general/conceptual/devpedia-cocoaapp/Animation.html">Cocoa Application Competencies for iOS: Animation</a></li>
</ul>


			<aside class="copyright" role="note">
				
				&copy; 2016 Peruzal &ndash;
				
				Xamarin iOS Guides by 
				<a href="https://www.peruzal.com" target="_blank">Peruzal</a>
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="http://guides.peruzal.com/ios-guides/tabbar-controller/" title="Tab Bar Controller">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Tab Bar Controller
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="http://guides.peruzal.com/ios-guides/persistence/" title="Persistence">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Persistence
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = '';
      var repo_id  = '';
    
    </script>

    <script src="http://guides.peruzal.com/ios-guides/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;
            
            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }
        

        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//gohugo.io/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/languages/cs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/languages/bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/languages/json.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/languages/swift.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/languages/xml.min.js"></script>    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/languages/objectivec.min.js"></script>
  </body>
</html>
