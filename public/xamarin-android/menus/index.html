<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link href=https://github.com/Peruzal/xamarin-android-guide/menus/ rel=canonical><meta name=lang:clipboard.copy content="Copy to clipboard"><meta name=lang:clipboard.copied content="Copied to clipboard"><meta name=lang:search.language content=en><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content="No matching documents"><meta name=lang:search.result.one content="1 matching document"><meta name=lang:search.result.other content="# matching documents"><meta name=lang:search.tokenizer content=[\s\-]+><link rel="shortcut icon" href=../images/favicon.ico><meta name=generator content="mkdocs-1.0.4, mkdocs-material-4.4.0"><title>Menus - Xamarin Android Guide - Peruzal</title><link rel=stylesheet href=../assets/stylesheets/application.0284f74d.css><link rel=stylesheet href=../assets/stylesheets/application-palette.01803549.css><meta name=theme-color content=#fb8c00><script src=../assets/javascripts/modernizr.74668098.js></script><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback"><style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style><link rel=stylesheet href=../assets/fonts/material-icons.css></head> <body dir=ltr data-md-color-primary=orange data-md-color-accent=orange> <svg class=md-svg> <defs> <svg xmlns=http://www.w3.org/2000/svg width=416 height=448 viewbox="0 0 416 448" id=__github><path fill=currentColor d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#android-menus tabindex=1 class=md-skip> Skip to content </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://github.com/Peruzal/xamarin-android-guide title="Xamarin Android Guide - Peruzal" class="md-header-nav__button md-logo"> <img src=../images/logo.png width=24 height=24> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title> <span class=md-header-nav__topic> Xamarin Android Guide - Peruzal </span> <span class=md-header-nav__topic> Menus </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=__search></label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=query data-md-state=active> <label class="md-icon md-search__icon" for=__search></label> <button type=reset class="md-icon md-search__icon" data-md-component=reset tabindex=-1> &#xE5CD; </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=result> <div class=md-search-result__meta> Type to start searching </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source> <a href=https://github.com/Peruzal/xamarin-android-guide/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> Github </div> </a> </div> </div> </div> </nav> </header> <div class=md-container> <main class=md-main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title md-nav__title--site" for=__drawer> <a href=https://github.com/Peruzal/xamarin-android-guide title="Xamarin Android Guide - Peruzal" class="md-nav__button md-logo"> <img src=../images/logo.png width=48 height=48> </a> Xamarin Android Guide - Peruzal </label> <div class=md-nav__source> <a href=https://github.com/Peruzal/xamarin-android-guide/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> Github </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../hello-xamarin-android/ title="Hello Xamarin.Android" class=md-nav__link> Hello Xamarin.Android </a> </li> <li class=md-nav__item> <a href=../android-components/ title="Android Components" class=md-nav__link> Android Components </a> </li> <li class=md-nav__item> <a href=../android-views/ title="Android Views" class=md-nav__link> Android Views </a> </li> <li class=md-nav__item> <a href=../common-views/ title="Common Views" class=md-nav__link> Common Views </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-toggle md-nav__toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Menus </label> <a href=./ title=Menus class="md-nav__link md-nav__link--active"> Menus </a> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#types-of-menus title="Types of menus" class=md-nav__link> Types of menus </a> </li> <li class=md-nav__item> <a href=#the-app-bar-and-options-menu title="The app bar and options menu" class=md-nav__link> The app bar and options menu </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#adding-the-app-bar title="Adding the app bar" class=md-nav__link> Adding the app bar </a> </li> <li class=md-nav__item> <a href=#adding-the-support-libraries title="Adding the support libraries" class=md-nav__link> Adding the support libraries </a> </li> <li class=md-nav__item> <a href=#adding-the-theme title="Adding the theme" class=md-nav__link> Adding the theme </a> </li> <li class=md-nav__item> <a href=#adding-the-appbarlayout-and-a-toolbar title="Adding the AppBarLayout and a Toolbar" class=md-nav__link> Adding the AppBarLayout and a Toolbar </a> </li> <li class=md-nav__item> <a href=#add-code-to-setup-the-app-bar title="Add code to setup the app bar" class=md-nav__link> Add code to setup the app bar </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#adding-the-options-menu title="Adding the options menu" class=md-nav__link> Adding the options menu </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#defining-how-the-menu-appears title="Defining how the menu appears" class=md-nav__link> Defining how the menu appears </a> </li> <li class=md-nav__item> <a href=#adding-icons-to-menus title="Adding icons to menus" class=md-nav__link> Adding icons to menus </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#contextual-menu title="Contextual menu" class=md-nav__link> Contextual menu </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#creating-the-xml-resource title="Creating the XML resource" class=md-nav__link> Creating the XML resource </a> </li> <li class=md-nav__item> <a href=#register-a-view-for-the-context-menu title="Register a View for the context menu" class=md-nav__link> Register a View for the context menu </a> </li> <li class=md-nav__item> <a href=#override-the-oncreatecontextmenu title="Override the OnCreateContextMenu" class=md-nav__link> Override the OnCreateContextMenu </a> </li> <li class=md-nav__item> <a href=#handle-selected-menu-items title="Handle selected menu items" class=md-nav__link> Handle selected menu items </a> </li> <li class=md-nav__item> <a href=#contextual-action-bar title="Contextual action bar" class=md-nav__link> Contextual action bar </a> </li> <li class=md-nav__item> <a href=#create-the-xml-menu-resource title="Create the XML menu resource" class=md-nav__link> Create the XML menu resource </a> </li> <li class=md-nav__item> <a href=#create-the-long-click-event title="Create the long-click event" class=md-nav__link> Create the long-click event </a> </li> <li class=md-nav__item> <a href=#implement-the-interface title="Implement the interface" class=md-nav__link> Implement the interface </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#inflate-the-menu-resource title="Inflate the menu resource" class=md-nav__link> Inflate the menu resource </a> </li> <li class=md-nav__item> <a href=#handle-the-item-clicks title="Handle the item clicks" class=md-nav__link> Handle the item clicks </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#popup-menu title="Popup menu" class=md-nav__link> Popup menu </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-the-menu-resource-file title="Create the menu resource file" class=md-nav__link> Create the menu resource file </a> </li> <li class=md-nav__item> <a href=#add-the-view-to-handle-the-click title="Add the View to handle the click" class=md-nav__link> Add the View to handle the click </a> </li> <li class=md-nav__item> <a href=#handle-the-event title="Handle the event" class=md-nav__link> Handle the event </a> </li> <li class=md-nav__item> <a href=#inflate-the-menu title="Inflate the menu" class=md-nav__link> Inflate the menu </a> </li> <li class=md-nav__item> <a href=#handle-menu-items-clicks title="Handle menu items clicks" class=md-nav__link> Handle menu items clicks </a> </li> <li class=md-nav__item> <a href=#show-the-popup title="Show the popup" class=md-nav__link> Show the popup </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../app-resources/ title="App Resources" class=md-nav__link> App Resources </a> </li> <li class=md-nav__item> <a href=../layouts/ title=Layouts class=md-nav__link> Layouts </a> </li> <li class=md-nav__item> <a href=../activities/ title=Activities class=md-nav__link> Activities </a> </li> <li class=md-nav__item> <a href=../recyclerview/ title=RecyclerView class=md-nav__link> RecyclerView </a> </li> <li class=md-nav__item> <a href=../navigation/ title=Navigation class=md-nav__link> Navigation </a> </li> <li class=md-nav__item> <a href=../fragments/ title=Fragments class=md-nav__link> Fragments </a> </li> <li class=md-nav__item> <a href=../dialogs/ title="Dialogs and Pickers" class=md-nav__link> Dialogs and Pickers </a> </li> <li class=md-nav__item> <a href=../common-intents/ title="Common Intents" class=md-nav__link> Common Intents </a> </li> <li class=md-nav__item> <a href=../networking/ title=Networking class=md-nav__link> Networking </a> </li> <li class=md-nav__item> <a href=../permissions/ title=Permissions class=md-nav__link> Permissions </a> </li> <li class=md-nav__item> <a href=../persistence/ title=Persistence class=md-nav__link> Persistence </a> </li> <li class=md-nav__item> <a href=../styles-and-themes/ title="Styles and Themes" class=md-nav__link> Styles and Themes </a> </li> <li class=md-nav__item> <a href=../animations/ title=Animation class=md-nav__link> Animation </a> </li> <li class=md-nav__item> <a href=../notifications/ title=Notifications class=md-nav__link> Notifications </a> </li> <li class=md-nav__item> <a href=../broadcast-receivers/ title="Broadcast Receivers" class=md-nav__link> Broadcast Receivers </a> </li> <li class=md-nav__item> <a href=../services/ title=Services class=md-nav__link> Services </a> </li> <li class=md-nav__item> <a href=../scheduling-alarms/ title="Scheduling Alarms" class=md-nav__link> Scheduling Alarms </a> </li> <li class=md-nav__item> <a href=../maps-and-location/ title="Maps and Location" class=md-nav__link> Maps and Location </a> </li> <li class=md-nav__item> <a href=../testing/ title=Testing class=md-nav__link> Testing </a> </li> <li class=md-nav__item> <a href=../third-party-libraries/ title="Third Party Libraries" class=md-nav__link> Third Party Libraries </a> </li> <li class=md-nav__item> <a href=../deployment/ title=Deployment class=md-nav__link> Deployment </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#types-of-menus title="Types of menus" class=md-nav__link> Types of menus </a> </li> <li class=md-nav__item> <a href=#the-app-bar-and-options-menu title="The app bar and options menu" class=md-nav__link> The app bar and options menu </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#adding-the-app-bar title="Adding the app bar" class=md-nav__link> Adding the app bar </a> </li> <li class=md-nav__item> <a href=#adding-the-support-libraries title="Adding the support libraries" class=md-nav__link> Adding the support libraries </a> </li> <li class=md-nav__item> <a href=#adding-the-theme title="Adding the theme" class=md-nav__link> Adding the theme </a> </li> <li class=md-nav__item> <a href=#adding-the-appbarlayout-and-a-toolbar title="Adding the AppBarLayout and a Toolbar" class=md-nav__link> Adding the AppBarLayout and a Toolbar </a> </li> <li class=md-nav__item> <a href=#add-code-to-setup-the-app-bar title="Add code to setup the app bar" class=md-nav__link> Add code to setup the app bar </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#adding-the-options-menu title="Adding the options menu" class=md-nav__link> Adding the options menu </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#defining-how-the-menu-appears title="Defining how the menu appears" class=md-nav__link> Defining how the menu appears </a> </li> <li class=md-nav__item> <a href=#adding-icons-to-menus title="Adding icons to menus" class=md-nav__link> Adding icons to menus </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#contextual-menu title="Contextual menu" class=md-nav__link> Contextual menu </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#creating-the-xml-resource title="Creating the XML resource" class=md-nav__link> Creating the XML resource </a> </li> <li class=md-nav__item> <a href=#register-a-view-for-the-context-menu title="Register a View for the context menu" class=md-nav__link> Register a View for the context menu </a> </li> <li class=md-nav__item> <a href=#override-the-oncreatecontextmenu title="Override the OnCreateContextMenu" class=md-nav__link> Override the OnCreateContextMenu </a> </li> <li class=md-nav__item> <a href=#handle-selected-menu-items title="Handle selected menu items" class=md-nav__link> Handle selected menu items </a> </li> <li class=md-nav__item> <a href=#contextual-action-bar title="Contextual action bar" class=md-nav__link> Contextual action bar </a> </li> <li class=md-nav__item> <a href=#create-the-xml-menu-resource title="Create the XML menu resource" class=md-nav__link> Create the XML menu resource </a> </li> <li class=md-nav__item> <a href=#create-the-long-click-event title="Create the long-click event" class=md-nav__link> Create the long-click event </a> </li> <li class=md-nav__item> <a href=#implement-the-interface title="Implement the interface" class=md-nav__link> Implement the interface </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#inflate-the-menu-resource title="Inflate the menu resource" class=md-nav__link> Inflate the menu resource </a> </li> <li class=md-nav__item> <a href=#handle-the-item-clicks title="Handle the item clicks" class=md-nav__link> Handle the item clicks </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#popup-menu title="Popup menu" class=md-nav__link> Popup menu </a> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-the-menu-resource-file title="Create the menu resource file" class=md-nav__link> Create the menu resource file </a> </li> <li class=md-nav__item> <a href=#add-the-view-to-handle-the-click title="Add the View to handle the click" class=md-nav__link> Add the View to handle the click </a> </li> <li class=md-nav__item> <a href=#handle-the-event title="Handle the event" class=md-nav__link> Handle the event </a> </li> <li class=md-nav__item> <a href=#inflate-the-menu title="Inflate the menu" class=md-nav__link> Inflate the menu </a> </li> <li class=md-nav__item> <a href=#handle-menu-items-clicks title="Handle menu items clicks" class=md-nav__link> Handle menu items clicks </a> </li> <li class=md-nav__item> <a href=#show-the-popup title="Show the popup" class=md-nav__link> Show the popup </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/Peruzal/xamarin-android-guide/edit/master/docs/menus.md title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a> <h1 id=android-menus>Android Menus<a class=headerlink href=#android-menus title="Permanent link">&para;</a></h1> <p>In this section you will learn about the Android menus. A menu provides a set of options. A user can select from a menu to perform a function, for example saving, deleting, searching or navigating to another screen.</p> <h2 id=types-of-menus>Types of menus<a class=headerlink href=#types-of-menus title="Permanent link">&para;</a></h2> <p><img alt="Types of Images" src=../images/types_menus_composite.png></p> <p>They are different types of menus :</p> <ol> <li><strong>Options menu</strong>: Appears in the app bar and provides the primary options that affect use of the app itself</li> <li><strong>Contextual menu</strong>: Appears as a floating list of choices when the user performs a long tap on an element on the screen. </li> <li><strong>Contextual action bar</strong>: Appears at the top of the screen overlaying the app bar, with action items that affect the selected element or elements.</li> <li><strong>Popup menu</strong>: Appears anchored to a View such as an ImageButton, and provides an overflow of actions or the second part of a two-part command.</li> </ol> <h2 id=the-app-bar-and-options-menu>The app bar and options menu<a class=headerlink href=#the-app-bar-and-options-menu title="Permanent link">&para;</a></h2> <p>The app bar (also called the action bar) is a dedicated space at the top of each <code>Activity</code> screen. </p> <ul> <li>The app bar by default shows the app title, or the name defined in <code>AndroidManifest.xml</code> by the <code>android:label</code> attribute for the <code>Activity</code>. </li> <li>The app bar may also include the Up button for navigating up to the parent activity.</li> <li>The options menu in the app bar usually provides navigation to other screens in the app, or options that affect using the app itself. The options menu appears to thr right.</li> </ul> <p><img alt="App Bar" src=../images/appbar_annotated.png></p> <p>In the figure above:</p> <ol> <li><strong>Navigation button</strong> or <strong>Up butto</strong>n: Use a navigation button in this space to open a navigation drawer, or use an Up button for navigating up through your app's screen hierarchy to the parent activity. Both are described in the next chapter.</li> <li><strong>Title</strong>: The title in the app bar is the app title, or the name defined in AndroidManifest.xml by the android:label attribute for the activity.</li> <li><strong>Action icons for the options menu</strong>: Each action icon appears in the app bar and represents one of the options menu's most frequently used items. Less frequently used options menu items appear in the overflow options menu.</li> <li><strong>Overflow options menu</strong>: The overflow icon opens a popup with option menu items that are not shown as icons in the app bar.</li> </ol> <p>Frequently used options menu items should appear as icons in the app bar. The overflow options menu shows the rest of the menu:</p> <p><img alt="Options Menu" src=../images/options_menu_views.png></p> <p>In the above figure:</p> <ol> <li><strong>App bar</strong>: The app bar includes the app title, the options menu, and the overflow button.</li> <li><strong>Options menu action icons</strong>: The first two options menu items appear as icons in the app bar.</li> <li><strong>Overflow button</strong>: The overflow button (three vertical dots) opens a menu that shows more options menu items.</li> <li><strong>Options overflow menu</strong>: After clicking the overflow button, more options menu items appear in the overflow menu.</li> </ol> <h3 id=adding-the-app-bar>Adding the app bar<a class=headerlink href=#adding-the-app-bar title="Permanent link">&para;</a></h3> <p>Each activity that uses the default theme also has an <code>ActionBar</code> as its app bar. Some themes also set up an ActionBar as an app bar by default. The ActionBar behaves differently with each version of Android. We are going to instead use the <code>Toolbar</code> because:</p> <ul> <li><code>Toolbar</code> makes it easy to set up an app bar that works on a wide range of devices.</li> <li><code>Toolbar</code> gives you room to customize your app bar later, as your app develops.</li> <li><code>Toolbar</code> includes the most recent features, and it works for any device that can use the support library.</li> </ul> <div class="admonition info"> <p class=admonition-title>The Toolbar comes from the v7 appcompat</p> <p>To add the Toolbar, you should have the <code>v7 appcompat</code> and <code>support design</code> libraries. This is already included in the app made from the default Android app project template.</p> </div> <p>Here are the steps to add the <code>Toolbar</code>:</p> <ol> <li>Add the support libraries <code>appcompat</code> and <code>design</code></li> <li>Use a <code>NoActionBar</code> theme and styles for the app bar and background.</li> <li>Add an <code>AppBarLayout</code> and a <code>Toolbar</code> to the layout.</li> <li>Add code to the <code>Activity</code> to set up the app bar.</li> </ol> <h3 id=adding-the-support-libraries>Adding the support libraries<a class=headerlink href=#adding-the-support-libraries title="Permanent link">&para;</a></h3> <ol> <li>Open the Nuget manager</li> <li>Search for <code>Xamarin.Android.Support</code></li> <li>Add the <code>Xamarin.Android.Supportv7.AppCompat</code> and <code>Xamarin.Android.Support.Design</code> librarues</li> </ol> <p><img alt="Add Support Librarues" src=../images/support-libraries.png></p> <p>The above shows the screen from the Visual Stuio 2019 for Mac.</p> <div class="admonition info"> <p class=admonition-title>Install Current Versions</p> <p>You should install the current versions of the support libraries. You might need to open the <code>SDK Manager</code> screen to update to the current versions of the support libraries.</p> </div> <h3 id=adding-the-theme>Adding the theme<a class=headerlink href=#adding-the-theme title="Permanent link">&para;</a></h3> <ol> <li>Open the styles.xml filed from Resources -&gt; values -&gt; styles.xml. If the file does not exist, create one.</li> <li>Add the theme with the name <code>AppTheme.NoActionBar</code></li> </ol> <p>The <code>styles.xml</code> should already have a theme <code>AppTheme</code> defined as follows :</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3
4
5
6</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=nt>&lt;style</span> <span class=na>name=</span><span class=s>&quot;AppTheme&quot;</span> <span class=na>parent=</span><span class=s>&quot;Theme.AppCompat.Light.DarkActionBar&quot;</span><span class=nt>&gt;</span>
    <span class=c>&lt;!-- Customize your theme here. --&gt;</span>
    <span class=nt>&lt;item</span> <span class=na>name=</span><span class=s>&quot;colorPrimary&quot;</span><span class=nt>&gt;</span>@color/colorPrimary<span class=nt>&lt;/item&gt;</span>
    <span class=nt>&lt;item</span> <span class=na>name=</span><span class=s>&quot;colorPrimaryDark&quot;</span><span class=nt>&gt;</span>@color/colorPrimaryDark<span class=nt>&lt;/item&gt;</span>
    <span class=nt>&lt;item</span> <span class=na>name=</span><span class=s>&quot;colorAccent&quot;</span><span class=nt>&gt;</span>@color/colorAccent<span class=nt>&lt;/item&gt;</span>
<span class=nt>&lt;/style&gt;</span>
</pre></div> </td></tr></table> <div class="admonition info"> <p class=admonition-title><code>AppTheme</code> inherits the default Android theme</p> <p><code>AppTheme</code> "inherits"—takes on all the styles—from a parent theme called <code>Theme.AppCompat.Light.DarkActionBar</code>, which is a standard theme supplied with Android. </p> </div> <p><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3
4</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=nt>&lt;style</span> <span class=na>name=</span><span class=s>&quot;AppTheme.NoActionBar&quot;</span><span class=nt>&gt;</span>
    <span class=nt>&lt;item</span> <span class=na>name=</span><span class=s>&quot;windowActionBar&quot;</span><span class=nt>&gt;</span>false<span class=nt>&lt;/item&gt;</span>
    <span class=nt>&lt;item</span> <span class=na>name=</span><span class=s>&quot;windowNoTitle&quot;</span><span class=nt>&gt;</span>true<span class=nt>&lt;/item&gt;</span>
<span class=nt>&lt;/style&gt;</span>
</pre></div> </td></tr></table> also add the theme with name <code>AppTheme.AppBarOverlay</code>, the theme for the <code>AppBarLayout</code> as follows :</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3</pre></div></td><td class=code><div class=codehilite><pre><span></span> <span class=nt>&lt;style</span> 
    <span class=na>name=</span><span class=s>&quot;AppTheme.AppBarOverlay&quot;</span> 
    <span class=na>parent=</span><span class=s>&quot;ThemeOverlay.AppCompat.Dark.ActionBar&quot;</span> <span class=nt>/&gt;</span>
</pre></div> </td></tr></table> <p>and lastly the theme for the <code>Toolbar</code>:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=nt>&lt;style</span> 
    <span class=na>name=</span><span class=s>&quot;AppTheme.PopupOverlay&quot;</span> 
    <span class=na>parent=</span><span class=s>&quot;ThemeOverlay.AppCompat.Light&quot;</span> <span class=nt>/&gt;</span>
</pre></div> </td></tr></table> <div class="admonition info"> <p class=admonition-title>Theme naming</p> <p>By using prefixing the name with <code>AppTheme</code>, this overrides the styles attributes already defined in the style with name <code>AppTheme</code>. So the <code>AppTheme.NoActionBar</code> will override the styles defined in the <code>AppTheme</code> and add the new style attributes <code>windowActionBar</code> and <code>windowNoTitle</code>. This is similar to how CSS works in the websites.</p> </div> <p>The complete <code>styles.xml</code> should now be as follows:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=cp>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class=nt>&lt;resources&gt;</span>
    <span class=c>&lt;!-- Base application theme. --&gt;</span>
    <span class=nt>&lt;style</span> <span class=na>name=</span><span class=s>&quot;AppTheme&quot;</span> <span class=na>parent=</span><span class=s>&quot;Theme.AppCompat.Light.DarkActionBar&quot;</span><span class=nt>&gt;</span>
        <span class=c>&lt;!-- Customize your theme here. --&gt;</span>
        <span class=nt>&lt;item</span> <span class=na>name=</span><span class=s>&quot;colorPrimary&quot;</span><span class=nt>&gt;</span>@color/colorPrimary<span class=nt>&lt;/item&gt;</span>
        <span class=nt>&lt;item</span> <span class=na>name=</span><span class=s>&quot;colorPrimaryDark&quot;</span><span class=nt>&gt;</span>@color/colorPrimaryDark<span class=nt>&lt;/item&gt;</span>
        <span class=nt>&lt;item</span> <span class=na>name=</span><span class=s>&quot;colorAccent&quot;</span><span class=nt>&gt;</span>@color/colorAccent<span class=nt>&lt;/item&gt;</span>
    <span class=nt>&lt;/style&gt;</span>
    <span class=nt>&lt;style</span> <span class=na>name=</span><span class=s>&quot;AppTheme.NoActionBar&quot;</span><span class=nt>&gt;</span>
        <span class=nt>&lt;item</span> <span class=na>name=</span><span class=s>&quot;windowActionBar&quot;</span><span class=nt>&gt;</span>false<span class=nt>&lt;/item&gt;</span>
        <span class=nt>&lt;item</span> <span class=na>name=</span><span class=s>&quot;windowNoTitle&quot;</span><span class=nt>&gt;</span>true<span class=nt>&lt;/item&gt;</span>
    <span class=nt>&lt;/style&gt;</span>
    <span class=nt>&lt;style</span> 
        <span class=na>name=</span><span class=s>&quot;AppTheme.AppBarOverlay&quot;</span> 
        <span class=na>parent=</span><span class=s>&quot;ThemeOverlay.AppCompat.Dark.ActionBar&quot;</span> <span class=nt>/&gt;</span>
    <span class=nt>&lt;style</span> 
        <span class=na>name=</span><span class=s>&quot;AppTheme.PopupOverlay&quot;</span> 
        <span class=na>parent=</span><span class=s>&quot;ThemeOverlay.AppCompat.Light&quot;</span> <span class=nt>/&gt;</span>
<span class=nt>&lt;/resources&gt;</span>
</pre></div> </td></tr></table> <h3 id=adding-the-appbarlayout-and-a-toolbar>Adding the <code>AppBarLayout</code> and a <code>Toolbar</code><a class=headerlink href=#adding-the-appbarlayout-and-a-toolbar title="Permanent link">&para;</a></h3> <ol> <li> <p>When adding the <code>AppBarLayout</code>, it needs to be a child of the <code>CoordinatorLayout</code> and the <code>Toolbar</code> must be a direct child of the <code>AppBarLayout</code> as follows: <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=cp>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class=nt>&lt;android.support.design.widget.CoordinatorLayout</span> 
    <span class=na>xmlns:app=</span><span class=s>&quot;http://schemas.android.com/apk/res-auto&quot;</span> 
    <span class=err>...</span><span class=nt>&gt;</span>
    <span class=nt>&lt;android.support.design.widget.AppBarLayout</span> 
        <span class=na>android:layout_width=</span><span class=s>&quot;match_parent&quot;</span> 
        <span class=na>android:layout_height=</span><span class=s>&quot;wrap_content&quot;</span> 
        <span class=na>android:theme=</span><span class=s>&quot;@style/AppTheme.AppBarOverlay&quot;</span><span class=nt>&gt;</span>
        <span class=nt>&lt;android.support.v7.widget.Toolbar</span> 
            <span class=na>android:id=</span><span class=s>&quot;@+id/toolbar&quot;</span> 
            <span class=na>android:layout_width=</span><span class=s>&quot;match_parent&quot;</span> 
            <span class=na>android:layout_height=</span><span class=s>&quot;?attr/actionBarSize&quot;</span> 
            <span class=na>android:background=</span><span class=s>&quot;?attr/colorPrimary&quot;</span> 
            <span class=na>app:popupTheme=</span><span class=s>&quot;@style/AppTheme.PopupOverlay&quot;</span> <span class=nt>/&gt;</span>
    <span class=nt>&lt;/android.support.design.widget.AppBarLayout&gt;</span>
<span class=nt>&lt;/android.support.design.widget.CoordinatorLayout&gt;</span>
</pre></div> </td></tr></table></p> </li> <li> <p><code>AppBarLayout</code> also requires a separate content layout sibling for the content that scrolls underneath the app bar. You can add this sibling as a view group (such as <code>RelativeLayout</code> or <code>LinearLayout</code>) in the same layout file, or in a separate layout file. You can include the layout as follows: <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span> <span class=nt>&lt;include</span> <span class=na>layout=</span><span class=s>&quot;@layout/content_main&quot;</span> <span class=nt>/&gt;</span>
</pre></div> </td></tr></table> or define the layout directly without using the <code>include</code>.</p> </li> <li> <p>Set the content sibling's view group to use the scrolling behavior AppBarLayout.ScrollingViewBehavior: <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span> app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;
</pre></div> </td></tr></table></p> </li> </ol> <p>The layout behavior for the <code>RelativeLayout</code> is set to the string resource <code>@string/appbar_scrolling_view_behavior</code>. This string resource controls how the screen scrolls in relation to the app bar at the top. The resource represents the following string, which is defined in the values.xml file (which you should not modify): <code>android.support.design.widget.AppBarLayout$ScrollingViewBehavior</code>.</p> <p>This behavior is defined by the <code>AppBarLayout.ScrollingViewBehavior</code> class. Any View or view group that can scroll vertically to support nested scrolling for AppBarLayout siblings should use this behavior.</p> <h3 id=add-code-to-setup-the-app-bar>Add code to setup the app bar<a class=headerlink href=#add-code-to-setup-the-app-bar title="Permanent link">&para;</a></h3> <ol> <li>The Activity should inherit from <code>AppCompatActivity</code> in order to use the app bar: <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=k>public</span> <span class=k>class</span> <span class=nc>MainActivity</span> <span class=p>:</span> <span class=n>AppCompatActivity</span> <span class=p>{</span>
    <span class=p>...</span>
<span class=p>}</span>
</pre></div> </td></tr></table></li> <li>In the <code>OnCreate</code> method call <code>SetSupportActionBar</code> with the toolbar as the parameter:</li> </ol> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3
4
5
6
7
8
9</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=k>protected</span> <span class=k>override</span> <span class=k>void</span> <span class=nf>OnCreate</span><span class=p>(</span><span class=n>Bundle</span> <span class=n>savedInstanceState</span><span class=p>)</span>
<span class=p>{</span>
    <span class=k>base</span><span class=p>.</span><span class=n>OnCreate</span><span class=p>(</span><span class=n>savedInstanceState</span><span class=p>);</span>
    <span class=n>Xamarin</span><span class=p>.</span><span class=n>Essentials</span><span class=p>.</span><span class=n>Platform</span><span class=p>.</span><span class=n>Init</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=n>savedInstanceState</span><span class=p>);</span>
    <span class=n>SetContentView</span><span class=p>(</span><span class=n>Resource</span><span class=p>.</span><span class=n>Layout</span><span class=p>.</span><span class=n>activity_main</span><span class=p>);</span>

<span class=hll>    <span class=n>Android</span><span class=p>.</span><span class=n>Support</span><span class=p>.</span><span class=n>V7</span><span class=p>.</span><span class=n>Widget</span><span class=p>.</span><span class=n>Toolbar</span> <span class=n>toolbar</span> <span class=p>=</span> <span class=n>FindViewById</span><span class=p>&lt;</span><span class=n>Android</span><span class=p>.</span><span class=n>Support</span><span class=p>.</span><span class=n>V7</span><span class=p>.</span><span class=n>Widget</span><span class=p>.</span><span class=n>Toolbar</span><span class=p>&gt;(</span><span class=n>Resource</span><span class=p>.</span><span class=n>Id</span><span class=p>.</span><span class=n>toolbar</span><span class=p>);</span>
</span><span class=hll>    <span class=n>SetSupportActionBar</span><span class=p>(</span><span class=n>toolbar</span><span class=p>);</span>
</span><span class=p>}</span>
</pre></div> </td></tr></table> <div class="admonition info"> <p class=admonition-title>There are multiple Toolbar classes</p> <p>When using the Toolbar, make sure you are using the Toolbar from <code>Android.Support.V7.Widget.Toolbar</code>. There's also a <code>Toolbar</code> class defined in <code>Android.Widget.Toolbar</code>.</p> </div> <p>The <code>Activity</code> should now show the <code>Toolbar</code>. By default, the app name will be displayed.</p> <h2 id=adding-the-options-menu>Adding the options menu<a class=headerlink href=#adding-the-options-menu title="Permanent link">&para;</a></h2> <p>The options menu is defined using XML. The menu resource file should live in the <strong>Resources</strong> -&gt; <strong>menu</strong> folder. The menu resources defines the menu for options menu, context menu or popup menu.</p> <p>The <code>MenuInflater</code> class is used to inflate the menu resource file and load it into the <code>Menu</code>.</p> <ol> <li> <p>Create the XML file in the <strong>Resources</strong> -&gt; <strong>menu</strong> folder. <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=nt>&lt;menu</span> 
    <span class=na>xmlns:android=</span><span class=s>&quot;http://schemas.android.com/apk/res/android&quot;</span> 
    <span class=na>xmlns:app=</span><span class=s>&quot;http://schemas.android.com/apk/res-auto&quot;</span> 
    <span class=na>xmlns:tools=</span><span class=s>&quot;http://schemas.android.com/tools&quot;</span><span class=nt>&gt;</span>
    <span class=nt>&lt;item</span> 
        <span class=na>android:id=</span><span class=s>&quot;@+id/action_settings&quot;</span> 
        <span class=na>android:orderInCategory=</span><span class=s>&quot;100&quot;</span> 
        <span class=na>android:title=</span><span class=s>&quot;@string/action_settings&quot;</span> 
        <span class=na>app:showAsAction=</span><span class=s>&quot;never&quot;</span> <span class=nt>/&gt;</span>
<span class=nt>&lt;/menu&gt;</span>
</pre></div> </td></tr></table></p> </li> <li> <p>Inflate the menu in the <code>OnCreateOptionsMenu</code> method <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3
4
5</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=k>public</span> <span class=k>override</span> <span class=kt>bool</span> <span class=nf>OnCreateOptionsMenu</span><span class=p>(</span><span class=n>IMenu</span> <span class=n>menu</span><span class=p>)</span>
<span class=p>{</span>
<span class=hll>    <span class=n>MenuInflater</span><span class=p>.</span><span class=n>Inflate</span><span class=p>(</span><span class=n>Resource</span><span class=p>.</span><span class=n>Menu</span><span class=p>.</span><span class=n>menu_main</span><span class=p>,</span> <span class=n>menu</span><span class=p>);</span>
</span>    <span class=k>return</span> <span class=k>true</span><span class=p>;</span>
<span class=p>}</span>
</pre></div> </td></tr></table></p> </li> <li> <p>Handle the menu item click in the <code>OnOptionsItemSelected</code> method: <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=k>public</span> <span class=k>override</span> <span class=kt>bool</span> <span class=nf>OnOptionsItemSelected</span><span class=p>(</span><span class=n>IMenuItem</span> <span class=n>item</span><span class=p>)</span>
<span class=p>{</span>
    <span class=kt>int</span> <span class=n>id</span> <span class=p>=</span> <span class=n>item</span><span class=p>.</span><span class=n>ItemId</span><span class=p>;</span>
    <span class=k>if</span> <span class=p>(</span><span class=n>id</span> <span class=p>==</span> <span class=n>Resource</span><span class=p>.</span><span class=n>Id</span><span class=p>.</span><span class=n>action_settings</span><span class=p>)</span>
    <span class=p>{</span>
        <span class=k>return</span> <span class=k>true</span><span class=p>;</span>
    <span class=p>}</span>

    <span class=k>return</span> <span class=k>base</span><span class=p>.</span><span class=n>OnOptionsItemSelected</span><span class=p>(</span><span class=n>item</span><span class=p>);</span>
<span class=p>}</span>
</pre></div> </td></tr></table></p> </li> </ol> <h3 id=defining-how-the-menu-appears>Defining how the menu appears<a class=headerlink href=#defining-how-the-menu-appears title="Permanent link">&para;</a></h3> <p>To add additional menu items, add them using the <code>&lt;item .../&gt;</code> tag. A menu item requires an <code>android:id</code> and a <code>android:title</code> or <code>android:icon</code>.</p> <p>When they are multiple menu items, you can also specify how they are ordered using <code>android:orderInCategory</code>. The higher the number, the further menu item is. To show the menu in the overflow menu, use the <code>app:showAsAction="never"</code>.</p> <p>Valid values for the <code>showAsAction</code> are:</p> <ul> <li><code>always</code> - Always place this item in the app bar</li> <li><code>ifRoom</code> - Only place this item in the app bar if there is room for it</li> <li><code>never</code> - Never place this item in the app bar. Instead, list the item in the app bar's overflow menu.</li> <li><code>withText</code> - Also include the title text (defined by android:title) with the item. </li> </ul> <p>For example, the following menu item's icon appears in the app bar only if there is room for it:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3
4
5
6</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=nt>&lt;item</span>
   <span class=na>android:id=</span><span class=s>&quot;@+id/action_favorites&quot;</span>
   <span class=na>android:icon=</span><span class=s>&quot;@drawable/ic_favorites_white&quot;</span>
   <span class=na>android:orderInCategory=</span><span class=s>&quot;40&quot;</span>
   <span class=na>android:title=</span><span class=s>&quot;@string/action_favorites&quot;</span>
   <span class=na>app:showAsAction=</span><span class=s>&quot;ifRoom&quot;</span> <span class=nt>/&gt;</span>
</pre></div> </td></tr></table> <p><img alt="Options menu" src=../images/options_menu_views.png></p> <p>In the above figure, the favorite item does not show since there's not enough room, but if we change the orientation, it now shows:</p> <p><img alt="Horizontal options menu" src=../images/menu_app_bar_vertical_horizontal_composite.png></p> <h3 id=adding-icons-to-menus>Adding icons to menus<a class=headerlink href=#adding-icons-to-menus title="Permanent link">&para;</a></h3> <p>To add an icon, use the <code>android:icon</code> and specify the icon resource file as follows:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3
4</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=nt>&lt;item</span>
      <span class=na>android:id=</span><span class=s>&quot;@+id/action_order&quot;</span>
      <span class=na>android:icon=</span><span class=s>&quot;@drawable/ic_order_white&quot;</span>
      <span class=na>android:title=</span><span class=s>&quot;@string/action_order&quot;</span><span class=nt>/&gt;</span>
</pre></div> </td></tr></table> <h2 id=contextual-menu>Contextual menu<a class=headerlink href=#contextual-menu title="Permanent link">&para;</a></h2> <p>Android provides two types of contextual menus:</p> <ul> <li>A context menu, appears as a floating list of menu items when the user performs a long tap on a View. It is typically used to modify the View or use it in some fashion. </li> <li>A contextual action bar, appears at the top of the screen in place of the app bar or underneath the app bar, with action items that affect one or more selected View elements.</li> </ul> <p><img alt="Contextual Menu" src=../images/menu_context.png></p> <p>The steps to create the context menu are as follows:</p> <ol> <li>Create the XML menu resource file</li> <li>Register a View to the context menu using <code>RegisterForContextMenu</code> passing in the view.</li> <li>Override the <code>OnCreateContextMenu</code> and inflate the menu</li> <li>Override the <code>OnContextItemSelected</code> to handle menu item clicks</li> <li>Create a method to perform an action for each of the context menu item</li> </ol> <h3 id=creating-the-xml-resource>Creating the XML resource<a class=headerlink href=#creating-the-xml-resource title="Permanent link">&para;</a></h3> <ol> <li>Create an XML file in <strong>Resources</strong> -&gt; <strong>menu</strong> folder.</li> <li>Add the context menu items uisng the <code>&lt;item ..&gt;</code> tags</li> </ol> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3
4</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=nt>&lt;item</span>
   <span class=na>android:id=</span><span class=s>&quot;@+id/context_edit&quot;</span>
   <span class=na>android:title=</span><span class=s>&quot;Edit&quot;</span>
   <span class=na>android:orderInCategory=</span><span class=s>&quot;10&quot;</span><span class=nt>/&gt;</span>
</pre></div> </td></tr></table> <h3 id=register-a-view-for-the-context-menu>Register a View for the context menu<a class=headerlink href=#register-a-view-for-the-context-menu title="Permanent link">&para;</a></h3> <p>After creating the view register it as follows:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>TextView</span> <span class=n>textView</span> <span class=p>=</span> <span class=n>FindViewById</span><span class=p>&lt;</span><span class=n>TextView</span><span class=p>&gt;(</span><span class=n>Resource</span><span class=p>.</span><span class=n>Id</span><span class=p>.</span><span class=n>title</span><span class=p>);</span>
<span class=n>RegisterForContextMenu</span><span class=p>(</span><span class=n>textView</span><span class=p>);</span>
</pre></div> </td></tr></table> <h3 id=override-the-oncreatecontextmenu>Override the <code>OnCreateContextMenu</code><a class=headerlink href=#override-the-oncreatecontextmenu title="Permanent link">&para;</a></h3> <p>Override the <code>OnCreateContextMenu</code> as follows :</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3
4</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=k>public</span> <span class=k>override</span> <span class=k>void</span> <span class=nf>OnCreateContextMenu</span><span class=p>(</span><span class=n>IContextMenu</span> <span class=n>menu</span><span class=p>,</span> <span class=n>View</span> <span class=n>v</span><span class=p>,</span> <span class=n>IContextMenuContextMenuInfo</span> <span class=n>menuInfo</span><span class=p>)</span>
<span class=p>{</span>
    <span class=k>base</span><span class=p>.</span><span class=n>OnCreateContextMenu</span><span class=p>(</span><span class=n>menu</span><span class=p>,</span> <span class=n>v</span><span class=p>,</span> <span class=n>menuInfo</span><span class=p>);</span>
<span class=p>}</span>
</pre></div> </td></tr></table> <p>Inflate the menu using the <code>MenuInflater</code> class as follows:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>MenuInflater</span><span class=p>.</span><span class=n>Inflate</span><span class=p>(</span><span class=n>Resource</span><span class=p>.</span><span class=n>Menu</span><span class=p>.</span><span class=n>menu_context</span><span class=p>,</span> <span class=n>menu</span><span class=p>);</span>
</pre></div> </td></tr></table> <p>The complete method should now be as follows:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3
4
5</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=k>public</span> <span class=k>override</span> <span class=k>void</span> <span class=nf>OnCreateContextMenu</span><span class=p>(</span><span class=n>IContextMenu</span> <span class=n>menu</span><span class=p>,</span> <span class=n>View</span> <span class=n>v</span><span class=p>,</span> <span class=n>IContextMenuContextMenuInfo</span> <span class=n>menuInfo</span><span class=p>)</span>
<span class=p>{</span>
    <span class=k>base</span><span class=p>.</span><span class=n>OnCreateContextMenu</span><span class=p>(</span><span class=n>menu</span><span class=p>,</span> <span class=n>v</span><span class=p>,</span> <span class=n>menuInfo</span><span class=p>);</span>
    <span class=n>MenuInflater</span><span class=p>.</span><span class=n>Inflate</span><span class=p>(</span><span class=n>Resource</span><span class=p>.</span><span class=n>Menu</span><span class=p>.</span><span class=n>menu_context</span><span class=p>,</span> <span class=n>menu</span><span class=p>);</span>
<span class=p>}</span>
</pre></div> </td></tr></table> <p>The parameter to the method:</p> <ul> <li><code>menu</code>: is the context menu to be built</li> <li><code>v</code>: is the view that registered for the context menu</li> <li><code>menuinfo</code>: Is the extra information about the view registered for the context menu. This varies depending on the view, e.g the RecyclerView or GridView will have a row id, position or a child view</li> </ul> <div class="admonition info"> <p class=admonition-title>MenuInflater</p> <p>The MenuInflater is a property defined on the class. It takes two parameters, the resource id for the XML resource to load and the menu to inflate the resource into.</p> </div> <h3 id=handle-selected-menu-items>Handle selected menu items<a class=headerlink href=#handle-selected-menu-items title="Permanent link">&para;</a></h3> <p>When the menu item is clicked, the system calls <code>OnContextItemSelected</code> method. Override the method as below:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3
4</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=k>public</span> <span class=k>override</span> <span class=kt>bool</span> <span class=nf>OnContextItemSelected</span><span class=p>(</span><span class=n>IMenuItem</span> <span class=n>item</span><span class=p>)</span>
<span class=p>{</span>
    <span class=k>return</span> <span class=k>base</span><span class=p>.</span><span class=n>OnContextItemSelected</span><span class=p>(</span><span class=n>item</span><span class=p>);</span>
<span class=p>}</span>
</pre></div> </td></tr></table> <p>We then handle each menu item with an if or switch statement. We use the <code>ItemId</code> to find which id was clicked:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=k>public</span> <span class=k>override</span> <span class=kt>bool</span> <span class=nf>OnContextItemSelected</span><span class=p>(</span><span class=n>IMenuItem</span> <span class=n>item</span><span class=p>)</span>
<span class=p>{</span>
    <span class=k>switch</span> <span class=p>(</span><span class=n>item</span><span class=p>.</span><span class=n>ItemId</span><span class=p>)</span>
    <span class=p>{</span>
        <span class=k>case</span> <span class=n>Resource</span><span class=p>.</span><span class=n>Id</span><span class=p>.</span><span class=n>action_edit</span><span class=p>:</span>
            <span class=n>EditNote</span><span class=p>();</span>
            <span class=k>return</span> <span class=k>true</span><span class=p>;</span>
        <span class=k>case</span> <span class=n>Resource</span><span class=p>.</span><span class=n>Id</span><span class=p>.</span><span class=n>action_delete</span><span class=p>:</span>
            <span class=n>DeleteNote</span><span class=p>();</span>
            <span class=k>return</span> <span class=k>true</span><span class=p>;</span>
        <span class=k>case</span> <span class=n>Resource</span><span class=p>.</span><span class=n>Id</span><span class=p>.</span><span class=n>action_favorite</span><span class=p>:</span>
            <span class=n>FavoriteNote</span><span class=p>();</span>
            <span class=k>return</span> <span class=k>true</span><span class=p>;</span>
        <span class=k>default</span><span class=p>:</span>
            <span class=k>return</span> <span class=k>base</span><span class=p>.</span><span class=n>OnContextItemSelected</span><span class=p>(</span><span class=n>item</span><span class=p>);</span>
    <span class=p>}</span>
<span class=p>}</span>
</pre></div> </td></tr></table> <div class="admonition info"> <p class=admonition-title>Getting additional information from the menu</p> <p>When using the context menu in an RecyclerView, you can cast the <code>MenuInfo</code> property on the <code>item</code> to gather more information supplied to the menu item.</p> </div> <p>When you long-click on the <code>TextView</code>, the popup should now show up as depicted in the image below:</p> <p><img alt="Showing Popup menu" src=../images/textview-context-menu.png></p> <h3 id=contextual-action-bar>Contextual action bar<a class=headerlink href=#contextual-action-bar title="Permanent link">&para;</a></h3> <p>A contextual action bar appears at the top of the screen to present actions the user can perform on a View after long-clicking the View, as shown in the figure below. To create a contextual action bar, perform the following action:</p> <ol> <li>Create the XML menu resource file and assign an icon to each item.</li> <li>Implement the <code>ActionMode.Callback</code> interface to handle the <code>ActionMode</code> lifecycle.</li> <li>Set the long-click event to the view using the event <code>LongClick</code>. Call the <code>StartActionMode</code> within the handler.</li> </ol> <h3 id=create-the-xml-menu-resource>Create the XML menu resource<a class=headerlink href=#create-the-xml-menu-resource title="Permanent link">&para;</a></h3> <p>Create the XML menu resource file in the Resource -&gt; menu folder. Add icons to the menu items as follows:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=cp>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class=nt>&lt;menu</span> <span class=na>xmlns:app=</span><span class=s>&quot;http://schemas.android.com/apk/res-auto&quot;</span>
    <span class=na>xmlns:android=</span><span class=s>&quot;http://schemas.android.com/apk/res/android&quot;</span><span class=nt>&gt;</span>

    <span class=nt>&lt;item</span>
        <span class=na>android:id=</span><span class=s>&quot;@+id/action_edit&quot;</span>
        <span class=na>android:icon=</span><span class=s>&quot;@android:drawable/ic_menu_edit&quot;</span>
        <span class=na>android:title=</span><span class=s>&quot;Edit&quot;</span> <span class=nt>/&gt;</span>
    <span class=nt>&lt;item</span>
        <span class=na>android:id=</span><span class=s>&quot;@+id/action_delete&quot;</span>
        <span class=na>android:icon=</span><span class=s>&quot;@android:drawable/ic_menu_delete&quot;</span>
        <span class=na>android:title=</span><span class=s>&quot;Delete&quot;</span> <span class=nt>/&gt;</span>
    <span class=nt>&lt;item</span>
        <span class=na>android:id=</span><span class=s>&quot;@+id/action_favorite&quot;</span>
        <span class=na>android:icon=</span><span class=s>&quot;@android:drawable/star_off&quot;</span>
        <span class=na>android:title=</span><span class=s>&quot;Favorite&quot;</span> <span class=nt>/&gt;</span>
<span class=nt>&lt;/menu&gt;</span>
</pre></div> </td></tr></table> <p>We have created the menu items, given them id, title and icons.</p> <h3 id=create-the-long-click-event>Create the long-click event<a class=headerlink href=#create-the-long-click-event title="Permanent link">&para;</a></h3> <p>We need to register a long-click event to show the contextual app bar menu.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3
4
5
6
7
8
9</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>TextView</span> <span class=n>textView</span> <span class=p>=</span> <span class=n>FindViewById</span><span class=p>&lt;</span><span class=n>TextView</span><span class=p>&gt;(</span><span class=n>Resource</span><span class=p>.</span><span class=n>Id</span><span class=p>.</span><span class=n>title</span><span class=p>);</span>
<span class=n>textView</span><span class=p>.</span><span class=n>LongClick</span> <span class=p>+=</span> <span class=p>(</span><span class=n>sender</span><span class=p>,</span> <span class=n>e</span><span class=p>)</span> <span class=p>=&gt;</span>
<span class=p>{</span>
    <span class=k>if</span><span class=p>(</span><span class=n>actionMode</span> <span class=p>==</span> <span class=k>null</span><span class=p>)</span>
    <span class=p>{</span>
        <span class=n>actionMode</span> <span class=p>=</span> <span class=n>StartActionMode</span><span class=p>(</span><span class=k>this</span><span class=p>);</span>
    <span class=p>}</span>
    <span class=p>((</span><span class=n>View</span><span class=p>)(</span><span class=n>sender</span><span class=p>)).</span><span class=n>Selected</span> <span class=p>=</span> <span class=k>true</span><span class=p>;</span>
<span class=p>};</span>
</pre></div> </td></tr></table> <p>The <code>actionMode</code> variable is defined as follows in the <code>MainActivity</code>, </p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=k>private</span> <span class=n>ActionMode</span> <span class=n>actionMode</span><span class=p>;</span>
</pre></div> </td></tr></table> <h3 id=implement-the-interface>Implement the interface<a class=headerlink href=#implement-the-interface title="Permanent link">&para;</a></h3> <p>Implement the interface on the <code>MainActivity</code> as follows :</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=k>public</span> <span class=k>class</span> <span class=nc>MainActivity</span> <span class=p>:</span> <span class=n>AppCompatActivity</span><span class=p>,</span> <span class=n>ActionMode</span><span class=p>.</span><span class=n>ICallback</span> <span class=p>{</span>
    <span class=p>....</span>
<span class=p>}</span>
</pre></div> </td></tr></table> <p>The <code>ActionMode.ICallback</code> contains the following methods that needs to be implemented:</p> <ul> <li><code>OnActionItemClicked</code> - Handle the click of the item</li> <li><code>OnCreateActionMode</code> - Inflate the menu resource file</li> <li><code>OnDestroyActionMode</code> - Handle actions when the menu is closed</li> <li><code>OnPrepareActionMode</code> - Handle additional actions once the menu is created</li> </ul> <h4 id=inflate-the-menu-resource>Inflate the menu resource<a class=headerlink href=#inflate-the-menu-resource title="Permanent link">&para;</a></h4> <p>Inflate the menu resource XML file as follows:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3
4
5
6
7</pre></div></td><td class=code><div class=codehilite><pre><span></span> <span class=c1>// Called when the action mode is created;</span>
<span class=k>public</span> <span class=kt>bool</span> <span class=nf>OnCreateActionMode</span><span class=p>(</span><span class=n>ActionMode</span> <span class=n>mode</span><span class=p>,</span> <span class=n>IMenu</span> <span class=n>menu</span><span class=p>)</span>
<span class=p>{</span>
    <span class=n>mode</span><span class=p>.</span><span class=n>Title</span> <span class=p>=</span> <span class=s>&quot;Actions&quot;</span><span class=p>;</span>
    <span class=n>MenuInflater</span><span class=p>.</span><span class=n>Inflate</span><span class=p>(</span><span class=n>Resource</span><span class=p>.</span><span class=n>Menu</span><span class=p>.</span><span class=n>menu_context</span><span class=p>,</span> <span class=n>menu</span><span class=p>);</span>
    <span class=k>return</span> <span class=k>true</span><span class=p>;</span>
<span class=p>}</span>
</pre></div> </td></tr></table> <h4 id=handle-the-item-clicks>Handle the item clicks<a class=headerlink href=#handle-the-item-clicks title="Permanent link">&para;</a></h4> <p>Handle the item clicks in the <code>OnActionItemClicked</code> as follows:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class=code><div class=codehilite><pre><span></span> <span class=c1>// Called when the user selects a contextual menu item</span>
<span class=k>public</span> <span class=kt>bool</span> <span class=nf>OnActionItemClicked</span><span class=p>(</span><span class=n>ActionMode</span> <span class=n>mode</span><span class=p>,</span> <span class=n>IMenuItem</span> <span class=n>item</span><span class=p>)</span>
<span class=p>{</span>
    <span class=k>switch</span> <span class=p>(</span><span class=n>item</span><span class=p>.</span><span class=n>ItemId</span><span class=p>)</span>
    <span class=p>{</span>
        <span class=k>case</span> <span class=n>Resource</span><span class=p>.</span><span class=n>Id</span><span class=p>.</span><span class=n>action_edit</span><span class=p>:</span>
            <span class=n>EditNote</span><span class=p>();</span>
            <span class=n>mode</span><span class=p>.</span><span class=n>Finish</span><span class=p>();</span>
            <span class=k>return</span> <span class=k>true</span><span class=p>;</span>
        <span class=p>....</span>
        <span class=k>default</span><span class=p>:</span>
            <span class=k>return</span> <span class=k>false</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>}</span>
</pre></div> </td></tr></table> <p>The <code>Finish</code> method closes the app bar after performing the action. Handle all the menu item clicks in the <code>switch</code> statement.</p> <p>In the <code>OnDestroyActionMode</code> set the <code>actionMode</code> variable to null as follows:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3
4
5</pre></div></td><td class=code><div class=codehilite><pre><span></span> <span class=c1>// Called when the user exits the action mode</span>
<span class=k>public</span> <span class=k>void</span> <span class=nf>OnDestroyActionMode</span><span class=p>(</span><span class=n>ActionMode</span> <span class=n>mode</span><span class=p>)</span>
<span class=p>{</span>
    <span class=n>actionMode</span> <span class=p>=</span> <span class=k>null</span><span class=p>;</span>
<span class=p>}</span>
</pre></div> </td></tr></table> <p>For the <code>OnPrepareActionMode</code> return false:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3
4</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=k>public</span> <span class=kt>bool</span> <span class=nf>OnPrepareActionMode</span><span class=p>(</span><span class=n>ActionMode</span> <span class=n>mode</span><span class=p>,</span> <span class=n>IMenu</span> <span class=n>menu</span><span class=p>)</span>
<span class=p>{</span>
    <span class=k>return</span> <span class=k>false</span><span class=p>;</span>
<span class=p>}</span>
</pre></div> </td></tr></table> <p>When you long-click the <code>TextView</code>, you should now have something like the figure below:</p> <h2 id=popup-menu>Popup menu<a class=headerlink href=#popup-menu title="Permanent link">&para;</a></h2> <p>A <code>PopupMenu</code> is a modal menu anchored to a <code>View</code>. It appears below the anchor view if there is room, or above the view otherwise.</p> <p>To show the PopMenu, you do the following:</p> <ol> <li>Create the menu resource file</li> <li>Add the View that show the PopMenu</li> <li>Inflate the PopMenu </li> <li>Handle the OnMenuItemClick for the PopMenu items</li> </ol> <h3 id=create-the-menu-resource-file>Create the menu resource file<a class=headerlink href=#create-the-menu-resource-file title="Permanent link">&para;</a></h3> <p>We create the file as the other menu resources in the <strong>Resources</strong> -&gt; <strong>menu</strong> folder.</p> <h3 id=add-the-view-to-handle-the-click>Add the View to handle the click<a class=headerlink href=#add-the-view-to-handle-the-click title="Permanent link">&para;</a></h3> <p>The a View to your layout file to handle the click event</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3
4
5
6
7</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=nt>&lt;ImageButton</span>
    <span class=na>android:layout_below=</span><span class=s>&quot;@id/title&quot;</span>
    <span class=na>android:id=</span><span class=s>&quot;@+id/optionButton&quot;</span>
    <span class=na>android:background=</span><span class=s>&quot;@android:color/transparent&quot;</span>
    <span class=na>android:src=</span><span class=s>&quot;@drawable/ic_more&quot;</span>
    <span class=na>android:layout_width=</span><span class=s>&quot;wrap_content&quot;</span>
    <span class=na>android:layout_height=</span><span class=s>&quot;wrap_content&quot;</span> <span class=nt>/&gt;</span>
</pre></div> </td></tr></table> <h3 id=handle-the-event>Handle the event<a class=headerlink href=#handle-the-event title="Permanent link">&para;</a></h3> <p>Create an event handler for the view:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3
4</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>ImageButton</span> <span class=n>imageButton</span> <span class=p>=</span> <span class=n>FindViewById</span><span class=p>&lt;</span><span class=n>ImageButton</span><span class=p>&gt;(</span><span class=n>Resource</span><span class=p>.</span><span class=n>Id</span><span class=p>.</span><span class=n>optionButton</span><span class=p>);</span>
<span class=n>imageButton</span><span class=p>.</span><span class=n>Click</span> <span class=p>+=</span> <span class=k>delegate</span> <span class=p>{</span>
    <span class=p>...</span>
<span class=p>}</span>
</pre></div> </td></tr></table> <h3 id=inflate-the-menu>Inflate the menu<a class=headerlink href=#inflate-the-menu title="Permanent link">&para;</a></h3> <p>Within the event handler we inflate the menu resource file into the PopupMenu as follows:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kt>var</span> <span class=n>popUpMenu</span> <span class=p>=</span> <span class=k>new</span> <span class=n>PopupMenu</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=n>imageButton</span><span class=p>);</span>
<span class=n>popUpMenu</span><span class=p>.</span><span class=n>MenuInflater</span><span class=p>.</span><span class=n>Inflate</span><span class=p>(</span><span class=n>Resource</span><span class=p>.</span><span class=n>Menu</span><span class=p>.</span><span class=n>menu_main</span><span class=p>,</span> <span class=n>popUpMenu</span><span class=p>.</span><span class=n>Menu</span><span class=p>);</span>
</pre></div> </td></tr></table> <h3 id=handle-menu-items-clicks>Handle menu items clicks<a class=headerlink href=#handle-menu-items-clicks title="Permanent link">&para;</a></h3> <p>Handle the menu item clicks as follows:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>popUpMenu</span><span class=p>.</span><span class=n>MenuItemClick</span> <span class=p>+=</span> <span class=p>(</span><span class=kt>object</span> <span class=n>sender</span><span class=p>,</span> <span class=n>PopupMenu</span><span class=p>.</span><span class=n>MenuItemClickEventArgs</span> <span class=n>e</span><span class=p>)</span> <span class=p>=&gt;</span>
<span class=p>{</span>
    <span class=k>switch</span> <span class=p>(</span><span class=n>e</span><span class=p>.</span><span class=n>Item</span><span class=p>.</span><span class=n>ItemId</span><span class=p>)</span>
    <span class=p>{</span>
        <span class=k>case</span> <span class=n>Resource</span><span class=p>.</span><span class=n>Id</span><span class=p>.</span><span class=n>action_edit</span><span class=p>:</span>
            <span class=p>...</span>
            <span class=k>break</span><span class=p>;</span>
        <span class=k>case</span> <span class=n>Resource</span><span class=p>.</span><span class=n>Id</span><span class=p>.</span><span class=n>action_delete</span><span class=p>:</span>
            <span class=p>...</span>
            <span class=k>break</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>};</span>
</pre></div> </td></tr></table> <h3 id=show-the-popup>Show the popup<a class=headerlink href=#show-the-popup title="Permanent link">&para;</a></h3> <p>Last we need to show the popupmenu:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>popUpMenu</span><span class=p>.</span><span class=n>Show</span><span class=p>();</span>
</pre></div> </td></tr></table> <p>The complete, code should look as follows:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>ImageButton</span> <span class=n>imageButton</span> <span class=p>=</span> <span class=n>FindViewById</span><span class=p>&lt;</span><span class=n>ImageButton</span><span class=p>&gt;(</span><span class=n>Resource</span><span class=p>.</span><span class=n>Id</span><span class=p>.</span><span class=n>optionButton</span><span class=p>);</span>
<span class=n>imageButton</span><span class=p>.</span><span class=n>Click</span> <span class=p>+=</span> <span class=k>delegate</span> <span class=p>{</span>
    <span class=kt>var</span> <span class=n>popUpMenu</span> <span class=p>=</span> <span class=k>new</span> <span class=n>PopupMenu</span><span class=p>(</span><span class=k>this</span><span class=p>,</span> <span class=n>imageButton</span><span class=p>);</span>
    <span class=n>popUpMenu</span><span class=p>.</span><span class=n>MenuInflater</span><span class=p>.</span><span class=n>Inflate</span><span class=p>(</span><span class=n>Resource</span><span class=p>.</span><span class=n>Menu</span><span class=p>.</span><span class=n>menu_main</span><span class=p>,</span> <span class=n>popUpMenu</span><span class=p>.</span><span class=n>Menu</span><span class=p>);</span>

    <span class=n>popUpMenu</span><span class=p>.</span><span class=n>MenuItemClick</span> <span class=p>+=</span> <span class=p>(</span><span class=kt>object</span> <span class=n>sender</span><span class=p>,</span> <span class=n>PopupMenu</span><span class=p>.</span><span class=n>MenuItemClickEventArgs</span> <span class=n>e</span><span class=p>)</span> <span class=p>=&gt;</span>
    <span class=p>{</span>
        <span class=k>switch</span> <span class=p>(</span><span class=n>e</span><span class=p>.</span><span class=n>Item</span><span class=p>.</span><span class=n>ItemId</span><span class=p>)</span>
        <span class=p>{</span>
            <span class=k>case</span> <span class=n>Resource</span><span class=p>.</span><span class=n>Id</span><span class=p>.</span><span class=n>action_edit</span><span class=p>:</span>
                <span class=k>break</span><span class=p>;</span>
            <span class=k>case</span> <span class=n>Resource</span><span class=p>.</span><span class=n>Id</span><span class=p>.</span><span class=n>action_delete</span><span class=p>:</span>
                <span class=k>break</span><span class=p>;</span>
            <span class=k>case</span> <span class=n>Resource</span><span class=p>.</span><span class=n>Id</span><span class=p>.</span><span class=n>action_favorite</span><span class=p>:</span>
                <span class=k>break</span><span class=p>;</span>
        <span class=p>}</span>
    <span class=p>};</span>

    <span class=n>popUpMenu</span><span class=p>.</span><span class=n>Show</span><span class=p>();</span>
<span class=p>};</span>
</pre></div> </td></tr></table> <div class="admonition info"> <p class=admonition-title>Inflating menu shortcut</p> <p>We could also have done <code>popUpMenu.Inflate(Resource.Menu.menu_main);</code> by calling the <code>Inflate</code> method without getting a <code>MenuInflater</code> to inflate the menu resource file.</p> </div> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid"> <a href=../common-views/ title="Common Views" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i> </div> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> Previous </span> Common Views </span> </div> </a> <a href=../app-resources/ title="App Resources" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel=next> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> <span class=md-footer-nav__direction> Next </span> App Resources </span> </div> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset" style="background-color: #ff9900; color: #fff"> <div class=md-grid style="display: flex;"> <div style="flex: 1;"> <h2>Consulting</h2> <ul style="list-style: none; margin-left: -15px;"> <li><a href=https://www.peruzal.com/mobile-app-development target=_blank>Mobile App Development</a></li> <li><a href=https://www.peruzal.com/mobile-app-device-security-and-penetration-testing target=_blank>Mobile App Security and Penetration Testing</a></li> <li><a href=https://www.peruzal.com/database-and-web-application-performance-tuning-and-consulting target=_blank>Database Performance Tuning</a></li> </ul> </div> <div style="flex: 1;"> <h2>Training</h2> <ul style="list-style: none; margin-left: -15px;"> <li><a href=https://training.peruzal.com/courses/mobile/android-mobile-app-development-training-certification target=_blank>Android Mobile App Development Training</a></li> <li><a href=https://training.peruzal.com/courses/mobile/ios-mobile-app-development-training-with-swift target=_blank>iOS Mobile App Development Training</a></li> <li><a href=https://training.peruzal.com/courses/mobile/xamarin/xamarin-forms-mobile-app-development-training target=_blank>Xamarin Forms Training</a></li> <li><a href=https://training.peruzal.com/courses/mobile/xamarin/android-mobile-app-development-training-with-xamarin target=_blank>Xamarin Android Training</a></li> <li><a href=https://training.peruzal.com/courses/mobile/xamarin/ios-mobile-app-development-training-with-xamarin target=_blank>Xamarin iOS Training</a></li> <li><a href=https://training.peruzal.com/courses/web/reactjs-front-end-web-application-development target=_blank>ReactJS Training</a></li> <li><a href=https://training.peruzal.com/courses/web/reactjs-front-end-web-application-development target=_blank>React Native Training</a></li> <li><a href=https://training.peruzal.com/courses/gaming/unity-certified-game-development-training-south-africa target=_blank>Unity Game Development Training</a></li> <li><a href=https://training.peruzal.com/courses/database/mysql-database-administration-training-certification-south-africa target=_blank>MySQL Database Adminstration Training</a></li> <li><a href=https://training.peruzal.com/courses/programming/java-programming-training-certification target=_blank>Java Programming Training</a></li> <li><a href=https://training.peruzal.com/courses/programming/ruby-programming-training-certification target=_blank>Ruby Programming Training</a></li> </ul> </div> <div style="flex: 1"> <h2>Resources</h2> <ul style="list-style: none; margin-left: -15px;"> <li><a href=http://guides.peruzal.com/xamarin-forms-guide target=_blank>Xamarin Forms Guide</a></li> <li><a href=http://guides.peruzal.com/v1/android-guides target=_blank>Android Development Guides</a></li> <li><a href=http://guides.peruzal.com/xamarin-ios target=_blank>iOS Development Guides</a></li> <li><a href=http://xamarin-android-guide.peruzal.com/ target=_blank>Xamarin Android Guides</a></li> <li><a href=http://xamarin-ios-guide.peruzal.com/ target=_blank>Xamarin iOS Guide</a></li> <li><a href=http://unity-certified-associate-guide.peruzal.com/ target=_blank>Unity Game Development Guide</a></li> <li><a href=https://josephkandi.gitbooks.io/mysql-5-6-database-administration-certification-g/content/ target=_blank>MySQL Database Adminstration Guide</a></li> <li><a href=https://josephkandi.gitbooks.io/learn-java-by-developing-an-android-app/content/ target=_blank>Java Programming Guide</a></li> </ul> </div> </div> <div class=md-footer-meta__inner style="background-color: rgba(0,0,0,.87)"> <div style="text-align: center; font-size: 0.7rem"> <div class=md-footer-copyright__highlight> <a href=https://www.peruzal.com target=_blank>Copyright &copy 2019 - Peruzal</a> </div> </div> </div> </div> </footer> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-40772582-8"></script> <script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-40772582-8');
</script> <script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script> <script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-6342782466521705",
          enable_page_level_ads: true
     });
</script> </div> <script src=../assets/javascripts/application.245445c6.js></script> <script>app.initialize({version:"1.0.4",url:{base:".."}})</script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> <script src=../assets/js/utils.js></script> <script src=../assets/js/mixpanel.js></script> <script src=../assets/js/track.js></script> <script src=../assets/js/drift.js></script> </body> </html>