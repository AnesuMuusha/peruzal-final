<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>SQL Server Architecture - Introduction to SQL</title>
    <meta name="generator" content="Hugo 0.19" />

    
    <meta name="description" content="Introduction to SQL Guide">
    
    <link rel="canonical" href="http://guides.peruzal.com/introduction-to-sql/sql-server-architecture/">
    
    <meta name="author" content="Peruzal">
    

    <meta property="og:url" content="http://guides.peruzal.com/introduction-to-sql/sql-server-architecture/">
    <meta property="og:title" content="Introduction to SQL">
    <meta property="og:image" content="http://guides.peruzal.com/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="Introduction to SQL">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="http://guides.peruzal.com/introduction-to-sql/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="http://guides.peruzal.com/introduction-to-sql/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('http://guides.peruzal.com/introduction-to-sql/fonts/icon.eot');
        src: url('http://guides.peruzal.com/introduction-to-sql/fonts/icon.eot')
               format('embedded-opentype'),
             url('http://guides.peruzal.com/introduction-to-sql/fonts/icon.woff')
               format('woff'),
             url('http://guides.peruzal.com/introduction-to-sql/fonts/icon.ttf')
               format('truetype'),
             url('http://guides.peruzal.com/introduction-to-sql/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="http://guides.peruzal.com/introduction-to-sql/stylesheets/application.css">
    <link rel="stylesheet" href="http://guides.peruzal.com/introduction-to-sql/stylesheets/temporary.css">
    <link rel="stylesheet" href="http://guides.peruzal.com/introduction-to-sql/stylesheets/palettes.css">
    <link rel="stylesheet" href="http://guides.peruzal.com/introduction-to-sql/stylesheets/highlight/highlight.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/styles/github-gist.min.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="http://guides.peruzal.com/introduction-to-sql/javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-deep-orange palette-accent-light-blue">




<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        SQL Server Architecture
      </div>
    </div>

    
    <div class="button button-twitter" role="button" aria-label="Twitter">
       <a href="https://twitter.com/peruzal" title="@peruzal on Twitter" target="_blank" class="toggle-button icon icon-twitter"></a>
    </div>
    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/peruzal" title="@peruzal on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="http://guides.peruzal.com/introduction-to-sql" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="http://guides.peruzal.com/introduction-to-sql/images/logo.png">
        </div>
      
      <div class="name">
        <strong>Introduction to SQL <span class="version">1.0.0</span></strong>
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a  title="Understanding SQL" href="http://guides.peruzal.com/introduction-to-sql/understanding-sql/">
	
	Understanding SQL
</a>



  
</li>



<li>
  
    



<a  title="Retrieving Data" href="http://guides.peruzal.com/introduction-to-sql/retrieving-data/">
	
	Retrieving Data
</a>



  
</li>



<li>
  
    



<a  title="Sorting Data" href="http://guides.peruzal.com/introduction-to-sql/sorting-data/">
	
	Sorting Data
</a>



  
</li>



<li>
  
    



<a  title="Filtering Data" href="http://guides.peruzal.com/introduction-to-sql/filtering-data/">
	
	Filtering Data
</a>



  
</li>



<li>
  
    



<a  title="Functions Data" href="http://guides.peruzal.com/introduction-to-sql/functions/">
	
	Functions Data
</a>



  
</li>



<li>
  
    



<a  title="Grouping Data" href="http://guides.peruzal.com/introduction-to-sql/grouping-data/">
	
	Grouping Data
</a>



  
</li>



<li>
  
    



<a  title="Sub Queries" href="http://guides.peruzal.com/introduction-to-sql/subqueries/">
	
	Sub Queries
</a>



  
</li>



<li>
  
    



<a  title="Joining Tables" href="http://guides.peruzal.com/introduction-to-sql/joining-tables/">
	
	Joining Tables
</a>



  
</li>



<li>
  
    



<a  title="Inserting Data" href="http://guides.peruzal.com/introduction-to-sql/inserting-data/">
	
	Inserting Data
</a>



  
</li>



<li>
  
    



<a  title="Updating Data" href="http://guides.peruzal.com/introduction-to-sql/updating-data/">
	
	Updating Data
</a>



  
</li>



<li>
  
    



<a  title="Deleting Data" href="http://guides.peruzal.com/introduction-to-sql/deleting-data/">
	
	Deleting Data
</a>



  
</li>



<li>
  
    



<a  title="Working with Tables" href="http://guides.peruzal.com/introduction-to-sql/working-with-tables/">
	
	Working with Tables
</a>



  
</li>



<li>
  
    



<a  title="Views" href="http://guides.peruzal.com/introduction-to-sql/views/">
	
	Views
</a>



  
</li>



<li>
  
    



<a  title="Stored Procedures" href="http://guides.peruzal.com/introduction-to-sql/stored-procedures/">
	
	Stored Procedures
</a>



  
</li>



<li>
  
    



<a  title="Transaction" href="http://guides.peruzal.com/introduction-to-sql/transactions/">
	
	Transaction
</a>



  
</li>



<li>
  
    



<a  title="Advanced SQL Features" href="http://guides.peruzal.com/introduction-to-sql/advanced-sql-features/">
	
	Advanced SQL Features
</a>



  
</li>



<li>
  
    



<a  title="Calculated Fields" href="http://guides.peruzal.com/introduction-to-sql/calculated-fields/">
	
	Calculated Fields
</a>



  
</li>



<li>
  
    



<a  title="Installing SQL Server" href="http://guides.peruzal.com/introduction-to-sql/installing-sql-server/">
	
	Installing SQL Server
</a>



  
</li>



<li>
  
    



<a class="current" title="SQL Server Architecture" href="http://guides.peruzal.com/introduction-to-sql/sql-server-architecture/">
	
	SQL Server Architecture
</a>


<ul id="scrollspy">
</ul>


  
</li>



<li>
  
    



<a  title="Database Recovery" href="http://guides.peruzal.com/introduction-to-sql/database-recovery/">
	
	Database Recovery
</a>



  
</li>



<li>
  
    



<a  title="Security" href="http://guides.peruzal.com/introduction-to-sql/database-security/">
	
	Security
</a>



  
</li>



<li>
  
    



<a  title="AlwaysOn Availability Groups" href="http://guides.peruzal.com/introduction-to-sql/sql-server-alwayson/">
	
	AlwaysOn Availability Groups
</a>



  
</li>



<li>
  
    



<a  title="Intro to SQL" href="http://guides.peruzal.com/introduction-to-sql/">
	
	Intro to SQL
</a>



  
</li>


        </ul>
        

        
        <hr>
        <span class="section">The author</span>
        
        <ul>
          
          <li>
            <a href="https://twitter.com/peruzal" target="_blank" title="@peruzal on Twitter">
              @peruzal on Twitter
            </a>
          </li>
          

          
          <li>
            <a href="https://github.com/peruzal" target="_blank" title="@peruzal on GitHub">
              @peruzal on GitHub
            </a>
          </li>
          

          
          <li>
            <a href="mailto:hello@peruzal.com" title="Email of hello@peruzal.com">
              Contact via email
            </a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>SQL Server Architecture </h1>

			

<h2 id="system-databases">System Databases</h2>

<p>During the installation of the Database Engine, the following system databases are generated:</p>

<ul>
<li><p>master</p></li>

<li><p>model</p></li>

<li><p>tempdb</p></li>

<li><p>msdb</p></li>
</ul>

<h3 id="master-database"><strong>master</strong> Database</h3>

<p>The master database is the most important system database of the Database Engine. It comprises all system tables that are necessary for your work. For example, the master database contains information about all other databases managed by the Database Engine, system connections to clients, and user authorizations.</p>

<p>Because of the importance of this system database, you should always keep a current backup copy of it. Also, the master database is modified each time you perform an operation such as creating user databases or user tables.</p>

<h3 id="model-database"><strong>model</strong> Database</h3>

<p>The model database is used as a template when user-defined databases are created. It contains the subset of all system tables of the master database, which every user-defined database needs. The system administrator can change the properties of the model database to adapt it to the specific needs of their system.</p>

<h3 id="tempdb-database"><strong>tempdb</strong> Database</h3>

<p>The tempdb database provides the storage space for temporary tables and other temporary objects that are needed. For example, the system stores intermediate results of the calculation of each complex expression in the tempdb database. The tempdb database is used by all the databases belonging to the entire system. Its content is destroyed every time the system is restarted.</p>

<p>The system stores three different elements in the tempdb database:</p>

<ul>
<li><p>User objects</p></li>

<li><p>Internal objects</p></li>

<li><p>Version store</p></li>
</ul>

<p><strong>Local and global temporary tables</strong>, which are created by users, are stored in the <strong>tempdb</strong> database. The other objects stored in this system database are table variables and table-valued functions.</p>

<p><strong>Internal objects</strong> are similar to user objects, except that they are not visible using catalog views or other tools to retrieve metadata. There are three types of internal objects: work files, work tables, and sort units. Work files are created when the system retrieves information using particular operators. Work tables are created by the system when certain operations, such as spooling and recovering databases and tables by the DBCC command, are executed. Finally, sort units are created when a sort operation is executed.</p>

<p><strong>Optimistic concurrency</strong> uses the tempdb database as a place to store versions of rows. Hence, the tempdb database grows each time the system performs the following operations, among others:</p>

<ul>
<li><p>An INSERT, UPDATE, or DELETE statement is executed in a snapshot transaction</p></li>

<li><p>A trigger is executed</p></li>
</ul>

<h3 id="msdb-database"><strong>msdb</strong> Database</h3>

<p>The msdb database is used by the component called SQL Server Agent to schedule alerts and jobs. This system database contains task scheduling, exception handling, alert management, and system operator information; for example, the msdb database holds information for all the operators, such as e-mail addresses and pager numbers, and history information about all the backups and restore operations.</p>

<h2 id="disk-storage-structure">Disk Storage Structure</h2>

<p>The storage architecture of the Database Engine contains several units for storing database objects:</p>

<ul>
<li><p>Page</p></li>

<li><p>Extent</p></li>

<li><p>File</p></li>

<li><p>Filegroup</p></li>
</ul>

<p>The main unit of data storage is the page. The size of a page is always 8KB. Each page has a 96-byte header used to store the system information. Data rows are placed on the page immediately after the header.</p>

<p>The Database Engine supports different page types. The most important are</p>

<ul>
<li><p>Data pages</p></li>

<li><p>Index pages</p></li>
</ul>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Data and index pages are actually physical parts of a database where the corresponding tables and indices are stored. The content of a database is stored in one or more files, and each file is divided into page units. Therefore, each table or index page (as a database physical unit) can be uniquely identified using a database ID, database file ID, and a page number.</p>
</div>

<p>When you create a table or index, the system allocates a fixed amount of space to contain the data belonging to the table or index. When the space fills, the space for additional storage must be allocated. The physical unit of storage in which space is allocated to a table (index) is called an extent. An <strong>extent</strong> comprises eight contiguous pages, or 64KB. There are two types of extents:</p>

<ul>
<li><p>Uniform extents</p></li>

<li><p>Mixed extents</p></li>
</ul>

<p>Uniform extents are owned by a single table or index, while mixed extents are shared by up to eight tables or indices. The system always allocates pages from mixed extents first. After that, if the size of the table (index) is greater than eight pages, it switches to uniform extents.</p>

<h2 id="utilities-and-the-dbcc-command">Utilities and the DBCC Command</h2>

<p>Utilities are components that provide different features such as data reliability, data definition, and statistics maintenance functions. The following utilities are described next:</p>

<ul>
<li><p>bcp</p></li>

<li><p>sqlcmd</p></li>

<li><p>sqlservr</p></li>
</ul>

<h3 id="bcp-utility"><strong>bcp</strong> Utility</h3>

<p>bcp (Bulk Copy Program) is a useful utility that copies database data to/from a data file. Therefore, bcp is often used to transfer a large amount of data into a Database Engine database from another relational DBMS using a text file, or vice versa.</p>

<p>E.g to copy the the table into a file :</p>

<p>bcp AdventureWorks2012.Person.Address out &ldquo;address.tx&rdquo; -T -c</p>

<p>The <strong>bcp</strong> command in exports the data from the address table of the <strong>AdventureWorks</strong> database in the output file address.txt. The option <strong>–</strong>T specifies that the trusted connection is used. (Trusted connection means that the system uses integrated security instead of the SQL Server authentication.) The option <strong>–c</strong> specifies character mode; thus, the data is stored in the ASCII file.</p>

<h3 id="sqlcmd-utility"><strong>sqlcmd</strong> Utility</h3>

<p>sqlcmd allows you to enter Transact-SQL statements, system procedures, and script files at the command prompt.</p>

<p>E.g to run a script in a file and put the results in a file :</p>

<p>sqlcmd -S localhost -i C:\Scripts\test.sql -o C:\Output\report.rpt</p>

<h3 id="dbcc-command">DBCC Command</h3>

<p>The Transact-SQL language supports the DBCC (Database Console Commands) statements, which are commands for the Database Engine. Depending on the options used with DBCC, the DBCC commands can be divided into the following groups:</p>

<ul>
<li><p>Maintenance</p></li>

<li><p>Informational</p></li>

<li><p>Validation</p></li>

<li><p>Miscellaneous</p></li>
</ul>


			<aside class="copyright" role="note">
				
				&copy; 2017 Copyright 2017 Peruzal &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="http://guides.peruzal.com/introduction-to-sql/installing-sql-server/" title="Installing SQL Server">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Installing SQL Server
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="http://guides.peruzal.com/introduction-to-sql/database-recovery/" title="Database Recovery">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Database Recovery
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = '';
      var repo_id  = '';
    
    </script>

    <script src="http://guides.peruzal.com/introduction-to-sql/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

